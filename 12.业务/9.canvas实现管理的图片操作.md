1. 画笔：监听鼠标点下事件`onmousedown` ，点击后开始监听鼠标移动移动事件`onmousemove`。通过canvas的`lineTo`绘制图片。监听抬起鼠标，然后取消事件监听。将每一次绘制的结果 **canvas 快照**到 `canvasHistory` 数组
2. 橡皮擦操作：和铅笔的实现方式相同，不过橡皮擦需要设置线条的颜色为画布的背景色，这样看起来就像被擦掉了一样。在擦除之后需要把线条颜色重新置为当前`color`元素选中的颜色`canvasBackground`
3. 保存快照：每完成一次绘制操作则保存一份 **canvas 快照**到 `canvasHistory` 数组（生成快照使用 canvas 的 `toDataURL()` 方法，生成的是 `base64` 的图片）；
4. 撤销和反撤销：把 `canvasHistory` 数组中对应索引的快照使用 canvas 的 `drawImage()` 方法重绘一遍；

https://blog.csdn.net/Robin_star_/article/details/83657188